{% extends "emails/base_email.html" %}

{% block title %}Milestone Updated - Perspective Tracker{% endblock %}

{% block content %}
<h2>Milestone Updated</h2>

<p>Hello,</p>

<p>A milestone has been updated in Perspective Tracker.</p>

<div class="info-box">
    <div class="details">
        <div class="details-item">
            <span class="details-label">Project:</span> {{ project.name }}
        </div>
        <div class="details-item">
            <span class="details-label">Milestone:</span> {{ milestone.name }}
        </div>
        {% if milestone.milestone_type %}
        <div class="details-item">
            <span class="details-label">Type:</span> {{ milestone.get_milestone_type_display }}
        </div>
        {% endif %}
        <div class="details-item">
            <span class="details-label">Status:</span> {{ milestone.get_status_display }}
        </div>
        <div class="details-item">
            <span class="details-label">Updated By:</span> {{ updater.get_full_name|default:updater.email }}
        </div>
        <div class="details-item">
            <span class="details-label">Updated On:</span> {{ milestone.updated_at|date:"F j, Y" }}
        </div>
        {% if milestone.assigned_to %}
        <div class="details-item">
            <span class="details-label">Assigned To:</span> {{ milestone.assigned_to.get_full_name|default:milestone.assigned_to.email }}
        </div>
        {% endif %}
        {% if milestone.start_date %}
        <div class="details-item">
            <span class="details-label">Start Date:</span> {{ milestone.start_date|date:"F j, Y" }}
        </div>
        {% endif %}
        {% if milestone.due_date %}
        <div class="details-item">
            <span class="details-label">Due Date:</span> {{ milestone.due_date|date:"F j, Y" }}
        </div>
        {% endif %}
        {% if milestone.completed_date %}
        <div class="details-item">
            <span class="details-label">Completed Date:</span> {{ milestone.completed_date|date:"F j, Y" }}
        </div>
        {% endif %}
    </div>
</div>

<h3>Changes Made:</h3>
<ul>
    {% for field in updated_fields %}
    <li>{{ field }}</li>
    {% endfor %}
</ul>

<p>You can view the updated milestone details by clicking the button below:</p>

<p style="text-align: center;">
    <a href="{{ milestone_url }}" class="button">View Milestone</a>
</p>

<p>If the button doesn't work, you can copy and paste this URL into your browser:</p>
<p>{{ milestone_url }}</p>
{% endblock %} 